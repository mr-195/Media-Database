{% load static %}


<head>
    <title>Image Store</title>
    <link rel="icon" href="{% static 'logo.svg' %}">
</head>


<h1>Upload an Image</h1>

<form action="/" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <label for="image">Select Image:</label>
    <input type="file" id="image" name="image" accept="image/*" required onchange="previewImage(event)">
    <br><br>
    <img id="preview" src="#" alt="Preview Image" style="max-width: 300px; max-height: 300px; display: none;">
    <br>
    <input type="submit" value="Upload">
</form>

{% if image %}
    <h2>Uploaded Image</h2>
    <img src="{{ image }}" alt="Uploaded Image" style="max-width: 300px; max-height: 300px;">
{% endif %}

{% if matched_images %}
    <h2>Matched Images</h2>
    <div style="display: flex; gap: 20px;">
        {% for matched_image in matched_images %}
            <img src="{{ matched_image }}" alt="Matched Image" style="max-width: 300px; max-height: 300px;">
        {% endfor %}
    </div>
{% endif %}

{% if error %}
    <h2>Error</h2>
    <p>{{ error }}</p>
{% endif %}

<script>
    function previewImage(event) {
        const file = event.target.files[0];
        const preview = document.getElementById('preview');
    
        if (file) {
            const reader = new FileReader();
    
            reader.onload = function(event) {
                preview.src = event.target.result;
                preview.style.display = 'block';
            }
    
            reader.readAsDataURL(file);
        } else {
            preview.src = '#';
            preview.style.display = 'none';
        }
    }
</script>
    